!function(n){var r={};function __webpack_require__(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=n,__webpack_require__.c=r,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(e){return t[e]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=13)}({13:function(e,t,n){n(16),e.exports=n(15)},14:function(v,e){!function(e){"use strict";var c,t=Object.prototype,u=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag",i="object"==typeof v,s=e.regeneratorRuntime;if(s)i&&(v.exports=s);else{(s=e.regeneratorRuntime=i?v.exports:{}).wrap=wrap;var p="suspendedStart",l="suspendedYield",f="executing",d="completed",y={},_={};_[o]=function(){return this};var h=Object.getPrototypeOf,b=h&&h(h(values([])));b&&b!==t&&u.call(b,o)&&(_=b);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(_);GeneratorFunction.prototype=m.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[a]=GeneratorFunction.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(m),e},s.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[r]=function(){return this},s.AsyncIterator=AsyncIterator,s.async=function(e,t,n,r){var o=new AsyncIterator(wrap(e,t,n,r));return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},defineIteratorMethods(m),m[a]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},s.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},s.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function handle(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var e=this.tryEntries.length-1;0<=e;--e){var t=this.tryEntries[e],o=t.completion;if("root"===t.tryLoc)return handle("end");if(t.tryLoc<=this.prev){var a=u.call(t,"catchLoc"),i=u.call(t,"finallyLoc");if(a&&i){if(this.prev<t.catchLoc)return handle(t.catchLoc,!0);if(this.prev<t.finallyLoc)return handle(t.finallyLoc)}else if(a){if(this.prev<t.catchLoc)return handle(t.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<t.finallyLoc)return handle(t.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;resetTryEntry(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),y}}}function wrap(e,t,n,r){var o=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(o.prototype),i=new Context(r||[]);return a._invoke=function makeInvokeMethod(a,i,c){var u=p;return function invoke(e,t){if(u===f)throw new Error("Generator is already running");if(u===d){if("throw"===e)throw t;return doneResult()}for(c.method=e,c.arg=t;;){var n=c.delegate;if(n){var r=maybeInvokeDelegate(n,c);if(r){if(r===y)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===p)throw u=d,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=f;var o=tryCatch(a,i,c);if("normal"===o.type){if(u=c.done?d:l,o.arg===y)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(u=d,c.method="throw",c.arg=o.arg)}}}(e,n,i),a}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function AsyncIterator(c){var e;this._invoke=function enqueue(n,r){function callInvokeWithMethodAndArg(){return new Promise(function(e,t){!function invoke(e,t,n,r){var o=tryCatch(c[e],c,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==typeof i&&u.call(i,"__await")?Promise.resolve(i.__await).then(function(e){invoke("next",e,n,r)},function(e){invoke("throw",e,n,r)}):Promise.resolve(i).then(function(e){a.value=e,n(a)},function(e){return invoke("throw",e,n,r)})}r(o.arg)}(n,r,e,t)})}return e=e?e.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var n=e.iterator[t.method];if(n===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,maybeInvokeDelegate(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=tryCatch(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function next(){for(;++n<e.length;)if(u.call(e,n))return next.value=e[n],next.done=!1,next;return next.value=c,next.done=!0,next};return r.next=r}}return{next:doneResult}}function doneResult(){return{value:c,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},15:function(e,t,n){},16:function(e,t,n){"use strict";var r;function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var o={SET_ROUTES:"SET_ROUTES",SET_LOCATION:"SET_LOCATION",SET_COMPONENT_PROP:"SET_COMPONENT_PROP_nolog",SET_APP_PROP:"SET_APP_PROP_nolog",SET_APP_PROP_LOG:"SET_APP_PROP"};function setAppPayload(e,t){return _objectSpread({},e,{App:_objectSpread({},e.App,t)})}function setRouterPayload(e,t){return _objectSpread({},e,{router:_objectSpread({},e.router,t)})}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function store_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){store_defineProperty(t,e,n[e])})}return t}function store_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=store_objectSpread({},(_defineProperty(r={},o.SET_ROUTES,setRouterPayload),_defineProperty(r,o.SET_LOCATION,setRouterPayload),_defineProperty(r,o.SET_COMPONENT_PROP,function setComponentPayload(e,t){var n=_objectSpread({},t),r=n.componentName,o=_objectWithoutProperties(n,["componentName"]);return _objectSpread({},e,{Components:_objectSpread({},e.Components,_defineProperty({},r,_objectSpread({},(e.Components||{})[r],o)))})}),_defineProperty(r,o.SET_APP_PROP,setAppPayload),_defineProperty(r,o.SET_APP_PROP_LOG,setAppPayload),r)),i={};function initStore(e,t){if("object"!==_typeof(t))throw new Error("initialState should be an object");if("object"!==_typeof(e)&&!Array.isArray(e))throw new Error("initialState should be an object or an Array of objects");(e=Array.isArray(e)?e:[e]).map(function(e){return function addReducer(e){a=store_objectSpread({},a,e)}(e)}),i=store_objectSpread({},t)}function dispatchAction(e,t){dispatch({type:e,payload:t})}function dispatch(e){var t=e.type,n=e.payload;if(!a[t])throw new Error("\n            Do not exist a reducer with name ".concat(t,"\n            The state will not change\n        "));i=a[t](i,n),document.dispatchEvent(new CustomEvent("state",{detail:{type:t,payload:n}}))}var c=3e3===parseFloat(window.location.port);function init(){c&&document.addEventListener("state",function(e){var t=function logger_objectSpread(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},e.detail),n=t.type,r=t.payload;-1===n.indexOf("nolog")&&(console.groupCollapsed(n,r),console.log("state:",i),console.groupEnd())})}n(14);function utils_typeof(e){return(utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function isDOMElement(e){return e instanceof Element}function cleanChildNodes(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];8===n.nodeType||3===n.nodeType&&!/\S/.test(n.nodeValue)?(e.removeChild(n),t--):1===n.nodeType&&cleanChildNodes(n)}}function aXplainWarn(e){window.env&&"dev"===env&&console.warn(e)}var u={mousedown:"touchstart",mouseup:"touchend",click:"touchstart",mousemove:"touchmove"};function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=[];var p=function isTextNode(e){return e.nodeType===Node.TEXT_NODE},l=function(){function Component(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Component);var n=isDOMElement(e)?this.constructor.name:e||this.constructor.name,r=isDOMElement(e)?[e]:document.querySelectorAll(".".concat(n));if(1<r.length)throw new Error("".concat(this.type,":\n            A Component needs a unique DOM Element to initialize,\n            there are ").concat(r.length," '").concat(n,"' at DOM"));if(!r.length)throw new Error("".concat(this.type,":\n                Component needs to be initializated with a single DOMElement,\n                there are not any '").concat(n,"' at DOM"));this.$clip=r[0],this._name=this.$clip.getAttribute("id")||function getUniqueName(e){for(var t=e,n=0;-1!=s.indexOf(e);)e=t+n++;return s.push(e),e}(n),this._classes2Render=t||[],this.props={},this.domProps={},this._components={},this._stateListener=this._onChangeState.bind(this),document.addEventListener("state",this._stateListener),this._stateListener()}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Component,[{key:"setState",value:function setState(){var e=_extends({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});!function setComponentProps(e,t){dispatchAction(o.SET_COMPONENT_PROP,_objectSpread({componentName:e},t))}(this.name,e)}},{key:"getAppProp",value:function getAppProp(e){return(i.App||{})[e]}},{key:"stateToprops",value:function stateToprops(e){return function Component_objectSpread(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},(e.Components||[])[this.name])}},{key:"render",value:function render(){return"Hello I'm ".concat(this.name," and these are my props: ").concat(this.props)}},{key:"renderTemplate",value:function renderTemplate(e,t){var n=t.replace(/(?:\r\n|\r|\n)/g,"").replace(/(onload|onLoad|onerror|onError)=/g,"$1_event=");if(!e||!isDOMElement(e))throw new TypeError("".concat(this.type,": renderTemplate requires a DOMElement and you passed [").concat(e,"]"));if(!n||!function isString(e){return"string"==typeof e||e instanceof String}(n))throw new TypeError("".concat(this.type,": renderTemplate requires a string and you passed [").concat(e,"]"));if(e.children.length){var r=document.createElement("div");r.innerHTML=n,e.innerHTML===r.innerHTML?aXplainWarn("".concat(this.type,": the updated DOM provided to renderTemplate is equal than\n                    actual DOM, maybe our stateToProps function is not well optimized")):r.children.length?this._updateDomElement(e,r):e.innerHTML=r.innerHTML}else e.innerHTML=n;this._setDomEvents(e)}},{key:"forceRender",value:function forceRender(){var e=this,t=this.render();t&&(this.renderTemplate(this.$clip,t),this._classes2Render&&this._classes2Render.length&&requestAnimationFrame(function(){e._initSubcomponents()}),this.onEndRender&&requestAnimationFrame(function(){e.onEndRender()}))}},{key:"_initSubcomponents",value:function _initSubcomponents(){var i=this;this._components=this._components||[],this._classes2Render.map(function(r){var o=r.prototype.constructor.name,a=i.$clip.querySelectorAll(o.toLowerCase());Object.keys(a).forEach(function(e,t){var n=a[e].getAttribute("id")||o+t;i._components[n]&&i._components[n].$clip===a[e]?i._components[n]._onChangeState():(a[e].setAttribute("id",n),a[e].__axplainComp__=r,i._components[n]=new r(a[e]))})})}},{key:"_isSubcomponent",value:function _isSubcomponent(t){return this._classes2Render.find(function(e){return e.prototype.constructor.name.toLowerCase()===t.nodeName.toLowerCase()})}},{key:"_updateDomElement",value:function _updateDomElement(r,e){var o=this;if(cleanChildNodes(r),cleanChildNodes(e),r&&!p(r)&&this._isSubcomponent(r))e.innerHTML=r.innerHTML;else{for(var t=Array.from(e.childNodes),a=Array.from(r.childNodes),n=a.length-1;n>=t.length;n--)r.removeChild(a[n]);t.forEach(function(t,e){var n=a[e];n?p(t)&&p(n)&&n.nodeValue!==t.nodeValue?n.nodeValue=t.nodeValue:p(n)&&!p(t)?r.replaceChild(t.cloneNode(!0),n):t.nodeName!==n.nodeName?n.outerHTML=t.outerHTML||"":t.outerHTML!==n.outerHTML&&(Array.from(t.attributes||[]).forEach(function(e){var t=n.getAttribute(e.name);t&&t===e.value||n.setAttribute(e.name,e.value)}),n.attributes.length>t.attributes.length&&Array.from(n.attributes||[]).forEach(function(e){t.attributes[e.name]||n.removeAttribute(e.name)}),t.value!==n.value&&(n.value=t.value),(t.childNodes.length||n.childNodes.length)&&o._updateDomElement(n,t)):(n=t.cloneNode(!0),r.appendChild(n))})}e.innerHTML.replace(/\s+/g,"")!==r.innerHTML.replace(/\s+/g,"")&&(aXplainWarn("\n                    Force innerHTML substitution :(\n                        OLD: ".concat(r.innerHTML.replace(/\s+/g,""),"\n                        NEW: ").concat(e.innerHTML.replace(/\s+/g,""),"\n                    ")),r.innerHTML=e.innerHTML)}},{key:"_onChangeState",value:function _onChangeState(){var e=!1,t=JSON.stringify(function getAllAttributes(e){var t={};if(e.hasAttributes())for(var n=e.attributes,r=n.length-1;0<=r;r--)t[n[r].name]=n[r].value;return t}(this.$clip));t&&JSON.stringify(this.domProps)!==t&&(this.domProps=JSON.parse(t),e=!0);var n=JSON.stringify(this.stateToprops(i))||null;n&&JSON.stringify(this.props)!==n&&(this.props=JSON.parse(n),e=!0),e&&this.forceRender()}},{key:"_setDomEvents",value:function _setDomEvents(e){var o=this;Array.from(e.children).forEach(function(r){Array.from(r.attributes).forEach(function(e){if("id"===e.name)o["$".concat(e.value)]=r;else if(""!=e.value&&0===e.name.indexOf("on")){var t=o[e.value];if(!t)throw new Error("function ".concat(e.value," do not exists in ").concat(o.name));e.name.indexOf("_event");var n="on"+function mapEvent(e){var t=u[e];return"object"===utils_typeof(window["on"+t])?t:e}(e.name.replace("_event","").slice(2));r[n]=t.bind(o)}}),!r.__axplainComp__&&r.children&&o._setDomEvents(r)})}},{key:"dispose",value:function dispose(){var t=this;for(var e in document.removeEventListener("state",this._stateListener),Object.keys(this._components).map(function(e){t._components[e].dispose(),delete t._components[e]}),this)this[e]=null,delete this[e]}},{key:"state",get:function get(){return i.Components&&i.Components[this.name]}},{key:"name",get:function get(){return this._name}},{key:"type",get:function get(){return this.constructor.name}}]),Component}();function router_extends(){return(router_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=[],d="";function initRouter(e,t){t=t||"",dispatch(function setRoutes(e){return{type:o.SET_ROUTES,payload:{routes:e}}}(f=_toConsumableArray(e)||[{url:"/"}])),setStateLocation(window.location.pathname)}function go(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e!==i.router.url&&setStateLocation(e)&&history[t?"pushState":"replaceState"](null,"",d+i.router.url)}function setStateLocation(e){var t=e||f[0].url,n=_matchRoute(t);if(n){if(n.redirect)return go(n.redirect),!1;router_extends({},function router_objectSpread(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},n));var r=function _getParams(e,t){for(var n=t.split("/"),r=e.split("/"),o={},a=0;a<n.length;a++)r[a]&&~n[a].indexOf(":")&&(o[n[a].slice(1)]=r[a]);return o}(t,n.url);return dispatch(function setLocation(e,t,n){return{type:o.SET_LOCATION,payload:{url:e,route:t,params:_objectSpread({},n)}}}(t,n.url,r)),!0}if(!_matchRoute("404"))throw new Error("\n                ".concat(t," do not exists in routes:\n                ").concat(f.map(function(e){return" ".concat(e.url," ")}).join(""),"\n            "));return setStateLocation("404"),!1}function _matchRoute(n){return f.find(function(e){var t=e.url.replace(/(:\w+)/g,"([\\w-]+)");return n.match("^".concat(t,"$"))})}function aXget(e,t){return function isFunction(e){return e&&"[object Function]"==={}.toString.call(e)}(e)&&(e=e()),aXfetch(e,t)}function aXfetch(n,e){return fetch(n,e).then(function(e){if(e.ok){var t=e.headers.get("Content-Type")||"";return-1!=t.indexOf("application/json")?e.json().catch(function(e){return Promise.reject(new Error("Invalid JSON: "+e.message))}):-1!=t.indexOf("text/html")||-1!=t.indexOf("text/javascript")?e.text().catch(function(e){return Promise.reject(e)}):Promise.reject(new Error("Invalid content type: "+t))}return 404==e.status?Promise.reject(new Error("Page not found: "+n)):Promise.reject(new Error("HTTP error: "+e.status))}).catch(function(e){return Promise.reject(e)})}window.onpopstate=function(e){setStateLocation(window.location.pathname)};var y,_="http://nanovaldes.com/wp-json/wp/v2";function actions_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){actions_defineProperty(t,e,n[e])})}return t}function actions_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var h={INIT_GET_POST_IMAGES:"INIT_GET_POST_IMAGES__nolog",END_GET_POST_IMAGES:"END_GET_POST_IMAGES__nolog",GET_POST_IMAGES:"GET_POST_IMAGES"};function _getPostImages(){return(_getPostImages=function _asyncToGenerator(a){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=a.apply(e,o);function _next(e){asyncGeneratorStep(r,t,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(r,t,n,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(n){var r;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dispatchAction(h.INIT_GET_POST_IMAGES,{postId:n,loading:!0});case 2:return e.next=4,t=n,aXget("".concat(_,"/media?parent=").concat(t));case 4:return r=e.sent,e.next=7,dispatchAction(h.GET_POST_IMAGES,{postId:n,images:r});case 7:return e.next=9,dispatchAction(h.END_GET_POST_IMAGES,{postId:n,loading:!1,loaded:!0});case 9:case"end":return e.stop()}var t},_callee,this)}))).apply(this,arguments)}var b=(actions_defineProperty(y={},h.GET_POST_IMAGES,function setPostImages(e,t){var n=actions_objectSpread({},t),r=n.postId,o=n.images.reduce(function(e,t){var n=actions_objectSpread({},t),r=n.id,o=n.media_details.sizes,a=n.source_url;return e[r]=o&&o.thumbnail?actions_objectSpread({},o):{thumbnail:{source_url:a}},e},{});return actions_objectSpread({},e,{posts:actions_objectSpread({},e.posts,actions_defineProperty({},r,actions_objectSpread({},e.posts[r],{images:o})))})}),actions_defineProperty(y,h.INIT_GET_POST_IMAGES,setPostImagesLoading),actions_defineProperty(y,h.END_GET_POST_IMAGES,setPostImagesLoading),y);function setPostImagesLoading(e,t){var n=actions_objectSpread({},t),r=n.postId,o=n.loading,a=n.loaded;return actions_objectSpread({},e,{posts:actions_objectSpread({},e.posts,actions_defineProperty({},r,actions_objectSpread({},e.posts[r],{imagesLoading:o,imagesLoaded:a})))})}function Obra_typeof(e){return(Obra_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Obra_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Obra_defineProperty(t,e,n[e])})}return t}function Obra_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Obra_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==Obra_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function Obra(e){return function Obra_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Obra),_possibleConstructorReturn(this,_getPrototypeOf(Obra).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Obra,l),function Obra_createClass(e,t,n){return t&&Obra_defineProperties(e.prototype,t),n&&Obra_defineProperties(e,n),e}(Obra,[{key:"stateToprops",value:function stateToprops(e){var t=Obra_objectSpread({},e),n=t.posts,r=void 0===n?{}:n,o=t.router.params.obraId,a=Obra_objectSpread({},this.domProps).id,i=r[a];return o!==a||i.imagesLoaded||i.imagesLoading||function getPostImages(e){return _getPostImages.apply(this,arguments)}(a),Obra_objectSpread({},i)}},{key:"render",value:function render(){var e=Obra_objectSpread({},this.props).title;return'\n            <div class="Obra__info">\n                <div class="Obra__title">'.concat(e,"</div>\n            </div>\n        ")}}]),Obra}();function getWindowSize(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function Portada_typeof(e){return(Portada_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Portada_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Portada_defineProperty(t,e,n[e])})}return t}function Portada_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Portada_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Portada_possibleConstructorReturn(e,t){return!t||"object"!==Portada_typeof(t)&&"function"!=typeof t?function Portada_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Portada_getPrototypeOf(e){return(Portada_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Portada_setPrototypeOf(e,t){return(Portada_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function Portada(e){return function Portada_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Portada),Portada_possibleConstructorReturn(this,Portada_getPrototypeOf(Portada).call(this,e,[m]))}return function Portada_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Portada_setPrototypeOf(e,t)}(Portada,l),function Portada_createClass(e,t,n){return t&&Portada_defineProperties(e.prototype,t),n&&Portada_defineProperties(e,n),e}(Portada,[{key:"stateToprops",value:function stateToprops(e){var t=Portada_objectSpread({},e),n=t.postsOrder,r=void 0===n?[]:n,o=t.posts,a=void 0===o?{}:o,i=t.router.params.obraId,c=a[i],u=a[this.state&&this.state.obraOver],s="",p="",l=[],f="http://nanovaldes.com/wp-content/uploads/2013/07/nanofoto-240x240.jpg",d=c||u;if(c){var y=Portada_objectSpread({},getWindowSize()),_=y.width,h=y.height,b=_-Portada_objectSpread({},function getOffset(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left+document.body.scrollLeft,width:t.right-t.left,height:t.bottom-t.top}}(this.$bar)).width,m=h;l=Object.keys(c.images).map(function(e){var u=c.images[e],t=Object.keys(u).reduce(function(e,t){var n=Portada_objectSpread({},u[t]),r=n.width,o=n.height,a=Portada_objectSpread({},u[e]),i=a.width,c=a.height;return e!==t&&r<b&&o<m&&(i<r||c<o)?t:e});return u[t]},"thumbnail"),p=c.title}if(d){var v=Portada_objectSpread({},d),g=v.images,O=v.featured_media,P=v.content,w=g[O]||g[Object.keys(g)[0]];f=w&&w.thumbnail&&w.thumbnail.source_url,s=P}return{postsOrder:r,posts:a,thumb:f,info:s,obraSel:i,gallery:l,title:p}}},{key:"onMouseOutObra",value:function onMouseOutObra(e){this.setState({obraOver:null})}},{key:"onMouseOverObra",value:function onMouseOverObra(e){this.setState({obraOver:(e.currentTarget||e.target).getAttribute("id")})}},{key:"onClickObra",value:function onClickObra(e){go("/obra/".concat((e.currentTarget||e.target).id)),this.$media.scrollTop=0}},{key:"goHome",value:function goHome(){go("/")}},{key:"render",value:function render(){var a,e=Portada_objectSpread({},this.props),t=e.postsOrder,i=e.posts,n=e.thumb,r=e.info,o=e.obraSel,c=e.gallery,u=e.title;return'\n            <div id="media" class="Portada__media media--'.concat(o?"opened":"closed",'">\n                <div id="gallery" class="media__gallery">\n                    ').concat(c.map(function(e){return'\n                        <div class="gallery__image" style="\n                            background-image:url('.concat(e.source_url,');\n                        "></div>\n                    ')}).join(""),'\n                </div>\n                <div id="bar" class="media__bar">\n                    <div class="media__nano" onCLick="goHome">NANO VALDES</div>\n                    <div class="media__thumbnail" style="background-image:url(').concat(n,')">\n                        ').concat(u?"\n                            <span>".concat(u,"</span>\n                        "):"",'\n                    </div>\n                    <div class="media__info">').concat(r,'</div>\n                </div>\n            </div>\n            <div class="Portada__obra">\n                ').concat(t.map(function(e,t){var n=Portada_objectSpread({},i[e]).date,r=new Date(n).getFullYear(),o=!1;return r!=a&&(o=!0,a=r),"\n                        ".concat(o?'\n                            <div \n                                class="Portada__year"\n                                style="animation-delay:'.concat(.08*t,'s;"\n                            >\n                                ').concat(a,"\n                            </div>\n                        "):"",'\n                        <Obra \n                            id="').concat(e,'" \n                            class="Obra" \n                            onMouseOut="onMouseOutObra"\n                            onMouseOver="onMouseOverObra"\n                            onClick="onClickObra"\n                            style="animation-delay:').concat(.08*t,'s;"\n                        ></Obra>\n                    ')}).join(""),"\n            </div>\n        ")}}]),Portada}();function App_actions_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){App_actions_defineProperty(t,e,n[e])})}return t}function App_actions_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function actions_asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var g={GET_POSTS:"GET_POSTS"};function _getPosts(){return(_getPosts=function actions_asyncToGenerator(a){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=a.apply(e,o);function _next(e){actions_asyncGeneratorStep(r,t,n,_next,_throw,"next",e)}function _throw(e){actions_asyncGeneratorStep(r,t,n,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(){var t;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dispatchAction(o.SET_APP_PROP,{loadingPosts:!0});case 2:return e.next=4,aXget("".concat(_,"/posts?per_page=100&_embed"));case 4:return t=e.sent,e.next=7,dispatchAction(o.SET_APP_PROP,{loadingPosts:!1});case 7:return e.next=9,dispatchAction(g.GET_POSTS,t);case 9:case"end":return e.stop()}},_callee,this)}))).apply(this,arguments)}var O=App_actions_defineProperty({},g.GET_POSTS,function setPosts(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t.map(function(e){return e.id}),r=t.reduce(function(e,t){var n=App_actions_objectSpread({},t),r=n.id,o=n.slug,a=n.content.rendered,i=n.date,c=n.excerpt.rendered,u=n.title.rendered,s=n.featured_media,p=n._embedded,l=App_actions_objectSpread({},p["wp:featuredmedia"][0]),f=l.media_details.sizes,d=l.source_url,y=f&&f.thumbnail?f:{thumbnail:{source_url:d}};return e[r]={id:r,slug:o,content:a,date:i,excerpt:c,title:u,featured_media:s,images:App_actions_defineProperty({},s,App_actions_objectSpread({},y))},e},{});return App_actions_objectSpread({},e,{postsOrder:n||[],posts:r||{}})});function App_typeof(e){return(App_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function App_objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){App_defineProperty(t,e,n[e])})}return t}function App_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function App_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function App_possibleConstructorReturn(e,t){return!t||"object"!==App_typeof(t)&&"function"!=typeof t?function App_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function App_getPrototypeOf(e){return(App_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function App_setPrototypeOf(e,t){return(App_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var P=[{url:"/"},{url:"/obra/:obraId"},{url:"404",redirect:"/"}],w=function(e){function App(e){var t;return function App_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,App),t=App_possibleConstructorReturn(this,App_getPrototypeOf(App).call(this,e,[v])),initStore([O,b],i),initRouter(P,window.BASE_URL||""),window.addEventListener("resize",function(){t.onResizeWindow()}),t.onResizeWindow(),function getPosts(){return _getPosts.apply(this,arguments)}(),t}return function App_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&App_setPrototypeOf(e,t)}(App,l),function App_createClass(e,t,n){return t&&App_defineProperties(e.prototype,t),n&&App_defineProperties(e,n),e}(App,[{key:"onResizeWindow",value:function onResizeWindow(){var e=getWindowSize();this.setState({winW:e.width,winH:e.height})}},{key:"stateToprops",value:function stateToprops(e){var t=App_objectSpread({},this.state),n=t.winW,r=t.winH,o=n,a="auto";return n/r<640/360&&(a=r,o="auto"),{videoW:o,videoH:a}}},{key:"render",value:function render(){var e=App_objectSpread({},this.props),t=e.videoW,n=e.videoH;return'\n            <video \n                class="video--back"\n                autoplay muted loop\n                src="/assets/video/nanoback.mp4"\n                width="'.concat(t,'"\n                height="').concat(n,'"\n            ></video>\n            <Portada class="Portada"></Portada>\n        ')}}]),App}();document.addEventListener("DOMContentLoaded",function(){init();var e=new w(document.getElementById("App"));!function log(e){c&&console.log(e)}("inited ".concat(e.name))})}});